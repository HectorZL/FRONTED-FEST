<div 
  *ngIf="showModal"
  class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity duration-300"
  (click)="closeModal()">
  
  <div 
    class="bg-white rounded-xl shadow-2xl w-full max-w-md transform transition-all duration-300 scale-100"
    (click)="onModalContentClick($event)">
    
    <!-- Header -->
    <div class="px-6 py-4 border-b border-gray-200">
      <div class="flex items-center justify-between">
        <h3 class="text-xl font-semibold text-gray-900">Agregar Nuevo Boleto</h3>
        <button 
          (click)="closeModal()"
          class="text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-lg hover:bg-gray-100">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Form -->
    <form (ngSubmit)="onSubmit()" class="p-6 space-y-4">
      
      <!-- Película -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Película *
        </label>
        <select 
          [(ngModel)]="newTicket.pelicula"
          name="pelicula"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
          <option value="">Seleccionar película</option>
          <option *ngFor="let pelicula of peliculas" [value]="pelicula">
            {{ pelicula }}
          </option>
        </select>
      </div>

      <!-- Fecha -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Fecha *
        </label>
        <input 
          type="date"
          [(ngModel)]="newTicket.fecha"
          name="fecha"
          [min]="minDate"
          [max]="maxDate"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
      </div>

      <!-- Hora -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Hora *
        </label>
        <select 
          [(ngModel)]="newTicket.hora"
          name="hora"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
          <option value="">Seleccionar hora</option>
          <option *ngFor="let hora of horas" [value]="hora">
            {{ hora }}
          </option>
        </select>
      </div>

      <!-- Sala -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Sala *
        </label>
        <select 
          [(ngModel)]="newTicket.sala"
          name="sala"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
          <option value="">Seleccionar sala</option>
          <option *ngFor="let sala of salas" [value]="sala">
            {{ sala }}
          </option>
        </select>
      </div>

      <!-- Asiento -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Asiento *
        </label>
        <select 
          [(ngModel)]="newTicket.asiento"
          name="asiento"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
          <option value="">Seleccionar asiento</option>
          <option *ngFor="let asiento of asientos" [value]="asiento">
            {{ asiento }}
          </option>
        </select>
      </div>

      <!-- Precio -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Precio ($) *
        </label>
        <input 
          type="number"
          [(ngModel)]="newTicket.precio"
          name="precio"
          min="0"
          step="0.01"
          placeholder="0.00"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
      </div>

    </form>

    <!-- Footer -->
    <div class="px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl">
      <div class="flex space-x-3 justify-end">
        <button
          type="button"
          (click)="closeModal()"
          class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
          Cancelar
        </button>
        <button
          type="button"
          (click)="onSubmit()"
          [disabled]="!newTicket.pelicula || !newTicket.fecha || !newTicket.hora || !newTicket.sala || !newTicket.asiento || newTicket.precio <= 0"
          class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
          Agregar Boleto
        </button>
      </div>
    </div>
  </div>
</div>